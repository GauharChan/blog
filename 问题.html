<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>gauhar&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script async="true" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1206812165499181"></script>
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="description" content="just a blog">
    
    <link rel="preload" href="/blog/assets/css/0.styles.db100c87.css" as="style"><link rel="preload" href="/blog/assets/js/app.2e9d2283.js" as="script"><link rel="preload" href="/blog/assets/js/3.e2beba07.js" as="script"><link rel="preload" href="/blog/assets/js/35.e4832a45.js" as="script"><link rel="preload" href="/blog/assets/js/7.3fa0df8d.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.ffe1b67e.js"><link rel="prefetch" href="/blog/assets/js/11.bf8611f8.js"><link rel="prefetch" href="/blog/assets/js/12.2f148a29.js"><link rel="prefetch" href="/blog/assets/js/13.eba1c3bc.js"><link rel="prefetch" href="/blog/assets/js/14.12f6a606.js"><link rel="prefetch" href="/blog/assets/js/15.f1d522ef.js"><link rel="prefetch" href="/blog/assets/js/16.43638a1e.js"><link rel="prefetch" href="/blog/assets/js/17.a80c4d40.js"><link rel="prefetch" href="/blog/assets/js/18.de192a16.js"><link rel="prefetch" href="/blog/assets/js/19.e5371cd0.js"><link rel="prefetch" href="/blog/assets/js/20.bc32fb2a.js"><link rel="prefetch" href="/blog/assets/js/21.cd32d469.js"><link rel="prefetch" href="/blog/assets/js/22.9267661b.js"><link rel="prefetch" href="/blog/assets/js/23.89405885.js"><link rel="prefetch" href="/blog/assets/js/24.2cd9ba43.js"><link rel="prefetch" href="/blog/assets/js/25.0ccd51b3.js"><link rel="prefetch" href="/blog/assets/js/26.303cbd19.js"><link rel="prefetch" href="/blog/assets/js/27.439c84c9.js"><link rel="prefetch" href="/blog/assets/js/28.6f111a67.js"><link rel="prefetch" href="/blog/assets/js/29.dec832ae.js"><link rel="prefetch" href="/blog/assets/js/30.833c3be2.js"><link rel="prefetch" href="/blog/assets/js/31.55e3416f.js"><link rel="prefetch" href="/blog/assets/js/32.61e40509.js"><link rel="prefetch" href="/blog/assets/js/33.4ef4f282.js"><link rel="prefetch" href="/blog/assets/js/34.9277d900.js"><link rel="prefetch" href="/blog/assets/js/4.9caf473a.js"><link rel="prefetch" href="/blog/assets/js/5.dd7ab500.js"><link rel="prefetch" href="/blog/assets/js/6.a12ed50c.js"><link rel="prefetch" href="/blog/assets/js/8.1c71d7cb.js"><link rel="prefetch" href="/blog/assets/js/9.4ba59c0f.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.3644c41e.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.db100c87.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">gauhar's blog</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他版本博客" class="dropdown-title"><span class="title">其他版本博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他版本博客" class="mobile-dropdown-title"><span class="title">其他版本博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gauharchan.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vitepress版
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gauhar.gitee.io/vuepress_node/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  某node资源
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gauhar.gitee.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hexo版(不维护)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://gitee.com/gauhar" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/GauharChan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他版本博客" class="dropdown-title"><span class="title">其他版本博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他版本博客" class="mobile-dropdown-title"><span class="title">其他版本博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gauharchan.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vitepress版
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gauhar.gitee.io/vuepress_node/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  某node资源
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gauhar.gitee.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hexo版(不维护)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://gitee.com/gauhar" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/GauharChan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/vite-plugin-shared.html" class="sidebar-link">vite插件-shared</a></li><li><a href="/blog/Taro开发中的坑.html" class="sidebar-link">Taro+NutUI</a></li><li><a href="/blog/react笔记.html" class="sidebar-link">react</a></li><li><a href="/blog/vue3.html" class="sidebar-link">vue3</a></li><li><a href="/blog/vue3源码.html" class="sidebar-link">vue3源码</a></li><li><a href="/blog/antv.html" class="sidebar-link">antv</a></li><li><a href="/blog/typeScript.html" class="sidebar-link">typeScript</a></li><li><a href="/blog/taro.html" class="sidebar-link">taro1.x</a></li><li><a href="/blog/uniapp.html" class="sidebar-link">uniapp</a></li><li><a href="/blog/es6笔记.html" class="sidebar-link">es6笔记</a></li><li><a href="/blog/问题.html" class="active sidebar-link">问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/问题.html#继承" class="sidebar-link">继承</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/问题.html#几种方式" class="sidebar-link">几种方式</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/问题.html#从-ur-输入到页面展现到底发生什么" class="sidebar-link">从 UR 输入到页面展现到底发生什么？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/问题.html#三次握手" class="sidebar-link">三次握手</a></li><li class="sidebar-sub-header"><a href="/blog/问题.html#为什么需要三次握手-两次不行吗" class="sidebar-link">为什么需要三次握手，两次不行吗？</a></li><li class="sidebar-sub-header"><a href="/blog/问题.html#四次挥手" class="sidebar-link">四次挥手</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/问题.html#ajax" class="sidebar-link">ajax</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/问题.html#工作过程" class="sidebar-link">工作过程</a></li><li class="sidebar-sub-header"><a href="/blog/问题.html#原生用法" class="sidebar-link">原生用法</a></li><li class="sidebar-sub-header"><a href="/blog/问题.html#jq-用法" class="sidebar-link">jq 用法</a></li><li class="sidebar-sub-header"><a href="/blog/问题.html#axios" class="sidebar-link">axios</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/问题.html#跨域" class="sidebar-link">跨域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/问题.html#解决方案" class="sidebar-link">解决方案</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/问题.html#promise" class="sidebar-link">promise</a></li><li class="sidebar-sub-header"><a href="/blog/问题.html#vue" class="sidebar-link">vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/问题.html#mvvm" class="sidebar-link">mvvm</a></li><li class="sidebar-sub-header"><a href="/blog/问题.html#双向绑定原理" class="sidebar-link">双向绑定原理</a></li><li class="sidebar-sub-header"><a href="/blog/问题.html#vue-router" class="sidebar-link">vue-router</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/问题.html#jquery" class="sidebar-link">JQuery</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/问题.html#文件上传" class="sidebar-link">文件上传</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/问题.html#http" class="sidebar-link">http</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/问题.html#http-缓存" class="sidebar-link">http 缓存</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/问题.html#浏览器渲染过程" class="sidebar-link">浏览器渲染过程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/问题.html#重排、重绘" class="sidebar-link">重排、重绘</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/问题.html#new-target" class="sidebar-link">new.target</a></li><li class="sidebar-sub-header"><a href="/blog/问题.html#垃圾回收" class="sidebar-link">垃圾回收</a></li><li class="sidebar-sub-header"><a href="/blog/问题.html#js-运行原理" class="sidebar-link">js 运行原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/问题.html#runtime" class="sidebar-link">runTime</a></li><li class="sidebar-sub-header"><a href="/blog/问题.html#堆栈" class="sidebar-link">堆栈</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/问题.html#script标签" class="sidebar-link">script标签</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/问题.html#defer" class="sidebar-link">defer</a></li><li class="sidebar-sub-header"><a href="/blog/问题.html#async" class="sidebar-link">async</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/问题.html#set无法对哪些值去重" class="sidebar-link">Set无法对哪些值去重</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/问题.html#方法和属性" class="sidebar-link">方法和属性</a></li></ul></li></ul></li><li><a href="/blog/js学习笔记.html" class="sidebar-link">js学习笔记</a></li><li><a href="/blog/webpack.html" class="sidebar-link">webpack</a></li><li><a href="/blog/vue笔记.html" class="sidebar-link">vue笔记</a></li><li><a href="/blog/常用代码.html" class="sidebar-link">常用代码</a></li><li><a href="/blog/工作常用代码.html" class="sidebar-link">工作常用代码</a></li><li><a href="/blog/工作上遇到的坑.html" class="sidebar-link">工作上遇到的坑</a></li><li><a href="/blog/那些坑.html" class="sidebar-link">那些坑</a></li><li><a href="/blog/正则表达式.html" class="sidebar-link">正则表达式</a></li><li><a href="/blog/flutter.html" class="sidebar-link">flutter</a></li><li><a href="/blog/js笔记.html" class="sidebar-link">js笔记</a></li><li><a href="/blog/note.html" class="sidebar-link">note</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div class="adswrapper"><!----> <div style="display:none;"></div> <ins data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-1206812165499181" data-ad-slot="9205356858" data-ad-test="" data-ad-region="" class="adsbygoogle" style="display:block;"></ins> <!----> <div style="display:none;"> (adsbygoogle = window.adsbygoogle || []).push({}); </div></div> <h2 id="继承"><a href="#继承" class="header-anchor">#</a> 继承</h2> <h3 id="几种方式"><a href="#几种方式" class="header-anchor">#</a> <a href="https://juejin.im/post/5bcb2e295188255c55472db0" target="_blank" rel="noopener noreferrer">几种方式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <h4 id="_1-原型链继承"><a href="#_1-原型链继承" class="header-anchor">#</a> 1. 原型链继承</h4> <blockquote><p>将父类的实例赋值给子类的原型</p> <p>数据在原型</p> <p><strong>缺点</strong>：多个实例对引用类型的操作会被篡改</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Son</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_2-借用构造函数继承"><a href="#_2-借用构造函数继承" class="header-anchor">#</a> 2. 借用构造函数继承</h4> <blockquote><p>通过<code>call方法</code>把父类的构造函数重定义指向子类的构造函数</p> <p>数据在构造函数</p></blockquote> <p><strong>缺点</strong>：</p> <ul><li>只能继承父类的<strong>实例</strong>属性和方法，不能继承原型属性/方法</li> <li>无法实现复用，每个子类都有父类实例函数的副本，影响性能</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Father</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-组合继承"><a href="#_3-组合继承" class="header-anchor">#</a> 3. 组合继承</h4> <blockquote><p>利用原型链继承父类原型的属性方法；借用构造函数继承的方式继承实例上的属性和方法。结合起来就是组合继承</p> <p><strong>缺点</strong>：调用了两次父类函数，其原型中会存在两份相同的属性/方法</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Father</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_4-原型式继承"><a href="#_4-原型式继承" class="header-anchor">#</a> 4. 原型式继承</h4> <blockquote><p>利用一个空对象，把父类的属性方法赋值给空对象构造函数的原型，返回实例。</p> <p><code>Object.create()</code>方法就是这样的意思</p></blockquote> <p>缺点：</p> <ul><li>原型链继承多个实例的引用类型属性指向相同，存在篡改的可能。</li> <li>无法传递参数</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 原型式</span>
<span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  f<span class="token punctuation">.</span>prototype <span class="token operator">=</span> obj<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;gauhar Person&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">arr</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> s3 <span class="token operator">=</span> <span class="token function">Father</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 原型式   Object.create</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;gauhar Person&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">arr</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> son <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
son<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;gauhar Son&quot;</span><span class="token punctuation">;</span>
son<span class="token punctuation">.</span>arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>son<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_5-寄生式继承"><a href="#_5-寄生式继承" class="header-anchor">#</a> 5. 寄生式继承</h4> <blockquote><p>使用原型式继承得到实例后，可以在实例的构造函数上绑定属性和方法</p> <p>缺点：和原型式的缺点一样</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  f<span class="token punctuation">.</span>prototype <span class="token operator">=</span> obj<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;gauhar 原型&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">arr</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">jisheng</span><span class="token punctuation">(</span><span class="token parameter">parms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> parasitism <span class="token operator">=</span> <span class="token function">Father</span><span class="token punctuation">(</span>parms<span class="token punctuation">)</span><span class="token punctuation">;</span>
  parasitism<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;gauhar 构造&quot;</span><span class="token punctuation">;</span>
  parasitism<span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;say 构造&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> parasitism<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> ji <span class="token operator">=</span> <span class="token function">jisheng</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>ji<span class="token punctuation">)</span><span class="token punctuation">;</span>
ji<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_6-寄生式组合继承"><a href="#_6-寄生式组合继承" class="header-anchor">#</a> 6. 寄生式组合继承</h4> <blockquote><p>使用寄生式继承父类的原型，使用借用构造函数继承实例的属性方法和传参</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  f<span class="token punctuation">.</span>prototype <span class="token operator">=</span> obj<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;gauhar 原型&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">arr</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;原型&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">jisheng</span><span class="token punctuation">(</span><span class="token parameter">parms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> parasitism <span class="token operator">=</span> <span class="token function">Father</span><span class="token punctuation">(</span>parms<span class="token punctuation">)</span><span class="token punctuation">;</span>
  parasitism<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;gauhar 构造&quot;</span><span class="token punctuation">;</span>
  parasitism<span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;say 构造&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> parasitism<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">composition</span><span class="token punctuation">(</span><span class="token parameter">son<span class="token punctuation">,</span> father</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token function">jisheng</span><span class="token punctuation">(</span>father<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 寄生继承</span>
  son<span class="token punctuation">.</span>prototype <span class="token operator">=</span> obj<span class="token punctuation">;</span> <span class="token comment">// 将父类的实例对象赋值给子类的原型</span>
  son<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> son<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">father</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
father<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">walk</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;这是father, 走路太慢了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">son</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">father</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">composition</span><span class="token punctuation">(</span>son<span class="token punctuation">,</span> father<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 新增子类原型属性</span>
son<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayAge</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> s5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">son</span><span class="token punctuation">(</span><span class="token string">&quot;父亲&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>s5<span class="token punctuation">)</span><span class="token punctuation">;</span>
s5<span class="token punctuation">.</span><span class="token function">walk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
s5<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;s5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> s6 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">son</span><span class="token punctuation">(</span><span class="token string">&quot;s6&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
s6<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;s6&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s5<span class="token punctuation">.</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, &quot;s5&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s6<span class="token punctuation">.</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, &quot;s6&quot;]</span>
</code></pre></div><h4 id="_7-混入方式继承多个对象"><a href="#_7-混入方式继承多个对象" class="header-anchor">#</a> 7. 混入方式继承多个对象</h4> <blockquote><p>通过借用构造函数的方式，可以继承多个对象的属性和方法</p> <p><code>Object.create</code>继承一个父类的原型对象</p> <p><code>Object.assign</code>混合继承其他父类的原型对象</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Father1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Father1&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Father1</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Father2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">&quot;Father2&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Father2</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayAge</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Myclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Father1</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">Father2</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Myclass</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Father1</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 把父类1的原型对象赋值给子类原型的__proto__对象</span>
<span class="token comment">// Myclass.prototype = Object.create(Father2.prototype)  // 会把father1的属性方法覆盖</span>
<span class="token comment">// 混合其他</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token class-name">Myclass</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token class-name">Father2</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 把父类2的原型拷贝赋值给子类的原型</span>
<span class="token class-name">Myclass</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">son</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Myclass</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Myclass<span class="token punctuation">;</span>
<span class="token keyword">let</span> my <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Myclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_8-es6-类继承-extends"><a href="#_8-es6-类继承-extends" class="header-anchor">#</a> 8. ES6 类继承 extends</h4> <blockquote><p>其内部实现和寄生式组合继承一样，是语法糖</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// es6</span>
<span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">like<span class="token punctuation">,</span> hate</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>like <span class="token operator">=</span> like<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>hate <span class="token operator">=</span> hate<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">get</span> <span class="token function">fruits</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>like<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">bad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;最不喜欢吃&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hate<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">sonLike<span class="token punctuation">,</span> sonHate</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>sonLike<span class="token punctuation">,</span> sonHate<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用父类的构造函数</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;sonName&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token string">&quot;🍎&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;🍌&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>son<span class="token punctuation">.</span>fruits<span class="token punctuation">)</span><span class="token punctuation">;</span>
son<span class="token punctuation">.</span><span class="token function">bad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>son<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="从-ur-输入到页面展现到底发生什么"><a href="#从-ur-输入到页面展现到底发生什么" class="header-anchor">#</a> <a href="https://segmentfault.com/a/1190000017184701" target="_blank" rel="noopener noreferrer">从 UR 输入到页面展现到底发生什么？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <ol><li>DNS 解析:将域名解析成 IP 地址</li> <li>TCP 连接：TCP 三次握手</li> <li>发送 HTTP 请求</li> <li>服务器处理请求并返回 HTTP 报文</li> <li>浏览器解析渲染页面</li> <li>断开连接：TCP 四次挥手</li></ol> <h3 id="三次握手"><a href="#三次握手" class="header-anchor">#</a> 三次握手</h3> <blockquote><p>三次握手用以同步客户端和服务端的序列号和确认号。为了防止已失效的连接请求报文段突然又传送到了服务端，因而产生错误</p></blockquote> <p>是指建立一个 TCP 连接时，需要客户端和服务器总共发送 3 个数据包。</p> <p><strong>通俗版</strong></p> <ol><li>由浏览器发起，告诉服务器我要发送请求了</li> <li>由服务器发起，告诉浏览器我准备接收了</li> <li>由浏览器发起，告诉服务器我马上就发了</li></ol> <p><strong>原理版</strong></p> <ul><li><p>第一次握手(SYN=1, seq=x):</p> <p>客户端发送一个 TCP 的 SYN 标志位置 1 的包，指明客户端打算连接的服务器的端口，以及初始序号 X,保存在包头的序列号(Sequence Number)字段里。</p> <p>发送完毕后，客户端进入 <code>SYN_SEND</code> 状态。</p></li> <li><p>第二次握手(SYN=1, ACK=1, seq=y, ACKnum=x+1):</p> <p>服务器发回确认包(ACK)应答。即 SYN 标志位和 ACK 标志位均为 1。服务器端选择自己 ISN 序列号，放到 Seq 域里，同时将确认序号(Acknowledgement Number)设置为客户的 ISN 加 1，即 X+1。 发送完毕后，服务器端进入 <code>SYN_RCVD</code> 状态。</p></li> <li><p>第三次握手(ACK=1，ACKnum=y+1)</p> <p>客户端再次发送确认包(ACK)，SYN 标志位为 0，ACK 标志位为 1，并且把服务器发来 ACK 的序号字段+1，放在确定字段中发送给对方，并且在数据段放写 ISN 的+1</p> <p>发送完毕后，客户端进入 <code>ESTABLISHED</code> 状态，当服务器端接收到这个包时，也进入 <code>ESTABLISHED</code> 状态，TCP 握手结束。</p></li></ul> <h3 id="为什么需要三次握手-两次不行吗"><a href="#为什么需要三次握手-两次不行吗" class="header-anchor">#</a> 为什么需要三次握手，两次不行吗？</h3> <p>其实这是由 TCP 的自身特点<strong>可靠传输</strong>决定的。客户端和服务端要进行可靠传输，那么就需要<strong>确认双方的接收和发送能力</strong>。第一次握手可以确认客服端的<strong>发送能力</strong>，第二次握手，确认了服务端的<strong>发送能力和接收能力</strong>，所以第三次握手才可以确认客户端的<strong>接收能力</strong>。不然容易出现丢包的现象。</p> <h3 id="四次挥手"><a href="#四次挥手" class="header-anchor">#</a> 四次挥手</h3> <p><strong>通俗版</strong></p> <ol><li>由浏览器发起的，发送给服务器，我请求报文发送完了，你准备关闭</li> <li>由服务器发起的， 告诉浏览器，我请求报文接受完了，我准备关闭了，你也准备吧</li> <li>由服务器发起，告诉浏 览器，我响应报文发送完了，你准备关闭吧)</li> <li>由浏览器发起，告诉服务器，我响应报文接受完了，我准备关闭了，你也准备吧</li></ol> <p><strong>原理版</strong></p> <ul><li><p>第一次挥手(FIN=1，seq=x)</p> <p>假设客户端想要关闭连接，客户端发送一个 FIN 标志位置为 1 的包，表示自己已经没有数据可以发送了，但是仍然可以接受数据。</p> <p>发送完毕后，客户端进入 <code>FIN_WAIT_1</code> 状态。</p></li> <li><p>第二次挥手(ACK=1，ACKnum=x+1)</p> <p>服务器端确认客户端的 FIN 包，发送一个确认包，表明自己接受到了客户端关闭连接的请求，但还没有准备好关闭连接。</p> <p>发送完毕后，服务器端进入 <code>CLOSE_WAIT</code> 状态，客户端接收到这个确认包之后，进入 <code>FIN_WAIT_2</code> 状态，等待服务器端关闭连接。</p></li> <li><p>第三次挥手(FIN=1，seq=y)</p> <p>服务器端准备好关闭连接时，向客户端发送结束连接请求，FIN 置为 1。</p> <p>发送完毕后，服务器端进入 <code>LAST_ACK</code> 状态，等待来自客户端的最后一个 ACK。</p></li> <li><p>第四次挥手(ACK=1，ACKnum=y+1)</p> <p>客户端接收到来自服务器端的关闭请求，发送一个确认包，并进入 <code>TIME_WAIT</code>状态，等待可能出现的要求重传的 ACK 包。</p> <p>服务器端接收到这个确认包之后，关闭连接，进入 <code>CLOSED</code> 状态。</p> <p>客户端等待了某个固定时间（两个最大段生命周期，2MSL，2 Maximum Segment Lifetime）之后，没有收到服务器端的 ACK ，认为服务器端已经正常关闭连接，于是自己也关闭连接，进入 <code>CLOSED</code> 状态</p></li></ul> <h2 id="ajax"><a href="#ajax" class="header-anchor">#</a> ajax</h2> <h3 id="工作过程"><a href="#工作过程" class="header-anchor">#</a> 工作过程</h3> <blockquote><p>创建<code>XMLHttpRequest</code>对象，调用<code>open</code>方法连接服务器，发送请求，获取服务端响应数据</p></blockquote> <h3 id="原生用法"><a href="#原生用法" class="header-anchor">#</a> 原生用法</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> xmlHttp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xmlHttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;demo.php&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xmlHttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xmlHttp<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>xmlHttp<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>xmlHttp<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xmlHttp<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="jq-用法"><a href="#jq-用法" class="header-anchor">#</a> <a href="https://www.runoob.com/jquery/ajax-ajax.html" target="_blank" rel="noopener noreferrer">jq 用法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <div class="language-js extra-class"><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;method&quot;</span><span class="token punctuation">,</span> <span class="token comment">// get, post</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;url&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">op</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">error</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="axios"><a href="#axios" class="header-anchor">#</a> axios</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/user/name'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'Gauhar'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'Chan'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// get</span>
axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'demo/url'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Gauhar'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token comment">//其他相关配置</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// post</span>
axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'Gauhar'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'Chan'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="跨域"><a href="#跨域" class="header-anchor">#</a> <a href="https://juejin.im/post/5c23993de51d457b8c1f4ee1" target="_blank" rel="noopener noreferrer">跨域<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <blockquote><p><strong>当协议、子域名、主域名、端口号中任意一个不相同时，都算作不同域</strong>。不同域之间相互请求资源，就是<strong>跨域</strong></p></blockquote> <p>有三个标签是允许跨域加载资源：</p> <ul><li><code>&lt;img src=XXX&gt;</code></li> <li><code>&lt;link href=XXX&gt;</code></li> <li><code>&lt;script src=XXX&gt;</code></li></ul> <h3 id="解决方案"><a href="#解决方案" class="header-anchor">#</a> 解决方案</h3> <h4 id="_1-jsonp"><a href="#_1-jsonp" class="header-anchor">#</a> 1. JSONP</h4> <blockquote><p><strong>JSONP 请求一定需要对方的服务器做支持才可以</strong>，简单兼容性好，但仅仅支持<code>get</code>请求，不安全</p></blockquote> <ol><li>创建一个回调函数， 当服务器返回时自动执行（<code>callback(data)</code>），通过函数的参数可以获取到服务发回来的数据</li> <li>拼接好要传的参数，因为是 get 请求(params1=value&amp;params2=value2)。并且约束好函数的<code>key</code>是<code>callback</code>，其他参数则是提交请求的参数</li> <li>创建一个<code>script</code>标签，把<code>url</code>和参数拼接起来，赋值给<code>script</code>标签的<code>src</code>，插入到<code>body</code>中</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// index.html</span>
<span class="token keyword">function</span> <span class="token function">jsonp</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> url<span class="token punctuation">,</span> params<span class="token punctuation">,</span> callback <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">[</span>callback<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 编写一个回调函数</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回服务器的数据</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 删除script标签</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 拼接</span>
    params <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>params<span class="token punctuation">,</span> callback <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// name=gauhar&amp;callback=sayHi</span>
    <span class="token keyword">let</span> arrs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      arrs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>arrs<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;&quot;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">jsonp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:6688/say&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;gauhar&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">callback</span><span class="token operator">:</span> <span class="token string">&quot;sayHi&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// hello gauhar</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>jq 写法</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:6688/say&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">&quot;jsonp&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 使用jsonp跨域</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;gauhar&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>node.js</code>代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/say&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> callback <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// gauhar</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// sayHi</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>callback<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">('hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">')</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">6688</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_2-代理"><a href="#_2-代理" class="header-anchor">#</a> 2.代理</h4> <blockquote><p>vue-cli 创建项目，在根目录下新建<code>vue.config.js</code>文件</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&quot;https://gauhar.top&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 实际的请求地址</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 开启跨域</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;^/api&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 来重写地址，将前缀 '/api' 转为 '/'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;/j&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&quot;https://movie.douban.com&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-cors"><a href="#_3-cors" class="header-anchor">#</a> 3.cors</h4> <blockquote><p>后端设置响应头:<code>Access-Control-Allow-Origin</code></p></blockquote> <h5 id="简单请求"><a href="#简单请求" class="header-anchor">#</a> 简单请求</h5> <p>只要同时满足以下两大条件，就属于简单请求</p> <p>条件 1：使用下列方法之一：</p> <ul><li>GET</li> <li>HEAD</li> <li>POST</li></ul> <p>条件 2：Content-Type 的值仅限于下列三者之一：</p> <ul><li>text/plain</li> <li>multipart/form-data</li> <li>application/x-www-form-urlencoded</li></ul> <h5 id="复杂请求"><a href="#复杂请求" class="header-anchor">#</a> 复杂请求</h5> <p>其他条件的情况就是复杂请求，复杂请求首先会发起一个<code>option</code>请求，判断服务端是否允许跨域</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// serve.js</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 设置哪个源可以访问我</span>
  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Origin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 允许携带哪个头访问我</span>
  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Headers&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// // 允许哪个方法访问我</span>
  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Methods&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">&quot;OPTIONS&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// OPTIONS请求不做任何处理</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;/put&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;gauhar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;running&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// index.html</span>
$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;PUT&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:4000/put&quot;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>运行代码可以看到，打印 111，222。这说明复杂请求的时候，先发了一个<code>option</code>请求，确定允许跨域后再发起<code>put</code>请求，返回数据</p> <h2 id="promise"><a href="#promise" class="header-anchor">#</a> promise</h2> <blockquote><p>Promise 是异步编程的一种解决方案，比传统的解决方案——回调函数和事件——更合理和更强大</p> <p>是一个容器，里面保存着某个未来才会结束的事件（通常是一个异步操作）的结果。</p></blockquote> <h2 id="vue"><a href="#vue" class="header-anchor">#</a> vue</h2> <h3 id="mvvm"><a href="#mvvm" class="header-anchor">#</a> mvvm</h3> <blockquote><p>M - Model 代表数据模型，也可以在 Model 中定义数据修改和操作的业务逻辑</p> <p>V - View，代表 UI 组件，它负责将数据模型转化为 UI 展现出来</p> <p>VM - ViewModel，监听模型数据的改变和控制视图行为、处理用户交互，简单理解就是一个同步 View 和 Model 的对象，连接 Model 和 View</p></blockquote> <h3 id="双向绑定原理"><a href="#双向绑定原理" class="header-anchor">#</a> <a href="https://juejin.im/entry/5923973da22b9d005893805a" target="_blank" rel="noopener noreferrer">双向绑定原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <h3 id="vue-router"><a href="#vue-router" class="header-anchor">#</a> <a href="https://router.vuejs.org/zh/guide/essentials/dynamic-matching.html#%E5%93%8D%E5%BA%94%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0%E7%9A%84%E5%8F%98%E5%8C%96" target="_blank" rel="noopener noreferrer">vue-router<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <h4 id="传参和取参"><a href="#传参和取参" class="header-anchor">#</a> 传参和取参</h4> <blockquote><p>path 和 query 一起使用</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">传参</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/xxx&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> id<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token literal-property property">接收参数</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
</code></pre></div><blockquote><p>name 和 params 一起使用</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">传参</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> id<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token literal-property property">接收参数</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
</code></pre></div><ul><li>1.<code>$router</code>为实例，想要导航到不同，则使用 router.push 方法</li> <li>2.<code>$route</code>为当前 router 跳转对象，里面可以获取 name、path、query、params 等</li></ul> <p><strong>另外，二者还有点区别，直白的来说 query 相当于 get 请求，页面跳转的时候，可以在地址栏看到请求参数，而 params 相当于 post 请求，参数不会再地址栏中显示</strong></p> <h2 id="jquery"><a href="#jquery" class="header-anchor">#</a> JQuery</h2> <h3 id="文件上传"><a href="#文件上传" class="header-anchor">#</a> 文件上传</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> files <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#avatar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">&quot;files&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取文件对象</span>
  <span class="token comment">// 使用Fromdata对象上传文件</span>
  <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  data<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;avatar&quot;</span><span class="token punctuation">,</span> files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// avatar是键名</span>

  $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;/api/upload&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> data<span class="token punctuation">,</span>
    <span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 兼容IE8</span>
    <span class="token literal-property property">contentType</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">processData</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>contentType: false</code>：jq 默认设置<code>content-Type</code>为<code>application/x-www-form-urlencoded</code>,这个是表单提交格式。文件上传的格式应该为<code>multipart/form-data</code>，<code>FormData</code>已经是这个格式，因此不使用<code>jq</code>的转换</p> <p><code>processData: false</code>：jQuery 会将<code>data</code>对象转换为字符串来发送 HTTP 请求，默认情况下会用 <code>application/x-www-form-urlencoded</code>编码来进行转换。 我们设置<code>contentType: false</code>后该转换会失败，因此设置<code>processData: false</code>来禁止该转换过程</p> <h2 id="http"><a href="#http" class="header-anchor">#</a> http</h2> <p>tcp 连接需要 3 次握手，只能单播(一对一)，面向字节流，可靠，堵塞(可控制)</p> <p>udp 是无连接协议，不会进行压缩，发送源数据报文，直接发送，不管对方是否收到。不可靠，无堵塞</p> <table><thead><tr><th></th> <th>UDP</th> <th>TCP</th></tr></thead> <tbody><tr><td>是否连接</td> <td>无连接</td> <td>面向连接</td></tr> <tr><td>是否可靠</td> <td>不可靠传输，不使用流量控制和拥塞控制</td> <td>可靠传输，使用流量控制和拥塞控制</td></tr> <tr><td>连接对象个数</td> <td>支持一对一，一对多，多对一和多对多交互通信</td> <td>只能是一对一通信</td></tr> <tr><td>传输方式</td> <td>面向报文</td> <td>面向字节流</td></tr> <tr><td>首部开销</td> <td>首部开销小，仅 8 字节</td> <td>首部最小 20 字节，最大 60 字节</td></tr> <tr><td>适用场景</td> <td>适用于实时应用（IP 电话、视频会议、直播等）</td> <td>适用于要求可靠传输的应用，例如文件传输</td></tr></tbody></table> <h3 id="http-缓存"><a href="#http-缓存" class="header-anchor">#</a> <a href="https://juejin.cn/post/6844903791809003527#heading-22" target="_blank" rel="noopener noreferrer">http 缓存<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>强缓存，向浏览器查询是否有缓存，如果没有就进行协商缓存。协商缓存就是向服务器发起 http 查询服务器是否有缓存，</p> <p>如果服务器有缓存就返回 304 状态码；如果没有就返回最新数据，状态码为 200。</p> <h4 id="强缓存"><a href="#强缓存" class="header-anchor">#</a> 强缓存</h4> <p>浏览器如果判断本地缓存未过期，就直接使用</p> <p><strong>HTTP 1.0</strong></p> <p>服务器使用的响应头字段为 <code>Expires</code> ，值为未来的绝对时间（时间戳），浏览器请求时的当前时间超过了 Expires 设置的时间，代表缓存失效，需要再次向服务器发送请求，否则都会直接从缓存数据库中获取数据。</p> <p><strong>HTTP 1.1</strong></p> <p><code>Cache-Control</code> 是最重要的规则，默认为 private。</p> <div class="language- extra-class"><pre class="language-text"><code>private     私有缓存
public      共享缓存
max-age     缓存的内容将在 xxx 秒后失效
no-cache    需要使用对比缓存来验证缓存数据
no-store    所有内容都不会缓存，强缓存、协商缓存都不会触发
</code></pre></div><h4 id="协商缓存"><a href="#协商缓存" class="header-anchor">#</a> 协商缓存</h4> <blockquote><p>根据请求头的 <strong>If-Modified-Since</strong> / <strong>If-None-Match</strong>的值和对应的服务端字段的值做匹配，一致则命中缓存，304 状态码</p></blockquote> <ul><li><em>http1.0</em> <strong>If-Modified-Since/Last-Modified</strong> 这两个是成对出现的，属于协商缓存的内容，其中浏览器的头部是<code>If-Modified-Since</code>，而服务端的是<code>Last-Modified</code>，只能<code>精确到1s以内</code>。</li> <li><em>http1.1</em> <strong>If-None-Match/E-tag</strong> 这两个是成对出现的，属于协商缓存的内容，其中浏览器的头部是<code>If-None-Match</code>，而服务端的是<code>E-tag</code></li></ul> <h2 id="浏览器渲染过程"><a href="#浏览器渲染过程" class="header-anchor">#</a> 浏览器渲染过程</h2> <ul><li>解析 HTML 生成 DOM 树。</li> <li>解析 CSS 生成 CSSOM 规则树。</li> <li>将 DOM 树与 CSSOM 规则树合并在一起生成<strong>渲染</strong>树。</li> <li>遍历<strong>渲染</strong>树开始布局，计算每个节点的位置大小信息。</li> <li>将<strong>渲染</strong>树每个节点绘制到屏幕。</li></ul> <p><img src="https://s3.ax1x.com/2021/03/03/6EmD8s.png" alt="过程"></p> <h3 id="重排、重绘"><a href="#重排、重绘" class="header-anchor">#</a> <a href="https://juejin.cn/post/6844904083212468238#heading-0" target="_blank" rel="noopener noreferrer">重排、重绘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <ul><li>重绘：某些元素的外观被改变，但没有改变布局(如果影响到布局，大小就会触发重排)，例如：元素的填充颜色</li> <li>重排：当 dom 结构发生变化，影响了元素的位置和尺寸大小，重新生成布局，重新排列元素。</li></ul> <h4 id="减少重排次数"><a href="#减少重排次数" class="header-anchor">#</a> 减少重排次数</h4> <ol><li>样式集中改变</li> <li>dom 操作，读和写，最好要分开</li> <li>使用绝对定位、固定定位脱离文档流</li></ol> <h4 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h4> <ul><li><p>重绘不一定导致重排，但重排一定会导致重绘。</p></li> <li><p>我们应该尽量以局部布局的形式组织 html 结构，尽可能小的影响重排的范围。</p></li></ul> <h2 id="new-target"><a href="#new-target" class="header-anchor">#</a> new.target</h2> <blockquote><p>判断函数或构造方法是否是通过<code>new</code>运算符被调用的</p> <p>如果函数或构造方法是被<code>new</code>实例化的，则<code>new.target</code>返回构造函数的引用(构造函数本身)</p> <p>如果是普通函数，则返回<code>undefined</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined  第二个打印报错，new.target是undefined了，肯定访问不了name</span>
<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ƒ Person () {</span>
<span class="token comment">//    this.age = 18</span>
<span class="token comment">//    console.log(new.target)</span>
<span class="token comment">//    console.log(new.target.name)</span>
<span class="token comment">// }</span>
<span class="token comment">// Person   new.target.name</span>
</code></pre></div><h2 id="垃圾回收"><a href="#垃圾回收" class="header-anchor">#</a> <a href="https://juejin.cn/post/6844903828102316045" target="_blank" rel="noopener noreferrer">垃圾回收<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <blockquote><p>垃圾收集器会定期（周期性）找出那些不在继续使用的变量，然后释放其内存</p></blockquote> <ol><li><p>标记清除</p> <blockquote><p>最常用的回收方式</p></blockquote> <p>对内存中的变量都进行标记，后面用不到了，或者已经访问不到了，会加上准备删除的标记。最后垃圾回收器对标记删除的变量进行垃圾回收</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">//被标记 ，进入环境</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">//被标记 ，进入环境</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//执行完毕 之后 a、b又被标离开环境，被回收。</span>
</code></pre></div></li> <li><p>引用计数</p> <p><strong>当垃圾回收器下次再运行时，它就会释放那些引用次数为 0 的值所占用的内存。</strong></p> <p>一个引用赋值给另一个变量，则引用计数+1。就是内存地址引用的次数。下面变量 b 初始化时，对 a 对象的引用，这个 a 的引用计数+1；后面重新定义了变量 b，并且不是 a 的引用，这时，a 的引用计数-1。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//a的引用次数为0</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span> <span class="token comment">//a的引用次数加1，为1</span>
  <span class="token keyword">var</span> c <span class="token operator">=</span> a<span class="token punctuation">;</span> <span class="token comment">//a的引用次数再加1，为2</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//a的引用次数减1，为1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>引用计数有缺点，就是引用循环。循环引用指的是对象 A 中包含一个指向对象 B 的指针，而对象 B 中也包含一个指向对象 A 的引用。</p></li></ol> <h2 id="js-运行原理"><a href="#js-运行原理" class="header-anchor">#</a> js 运行原理</h2> <ul><li><p>JS 引擎主要负责把 JS 代码转为机器能执行的机器码，而 JS 代码中调用的一些 WEB API 则由其运行环境提供，这里指的是浏览器。</p></li> <li><p>JS 是单线程运行，每次都从调用栈出取出代码进行调用。如果当前代码非常耗时，则会阻塞当前线程导致浏览器卡顿。</p></li> <li><p>回调函数是通过加入到事件队列中，等待 Event Loop 拿出并放到调用栈中进行调用。只有 Event Loop 监听到调用栈为空时，才会从事件队列中从队头拿出回调函数放进调用栈里。</p></li></ul> <h3 id="runtime"><a href="#runtime" class="header-anchor">#</a> runTime</h3> <blockquote><p>浏览器提供的一些 api，比如<code>window</code>、<code>dom</code>的 api；js 的事件循环、事件队列被称为<code>runTime</code></p></blockquote> <h3 id="堆栈"><a href="#堆栈" class="header-anchor">#</a> 堆栈</h3> <p>堆:：储存着引用类型的内存地址，闭包的变量也存在于此</p> <p>栈：储存函数的调用，基本类型的数据。函数上下文执行完毕之后被消除，如果还有引用，那就继续存在于调用栈中。</p> <h2 id="script标签"><a href="#script标签" class="header-anchor">#</a> script标签</h2> <h3 id="defer"><a href="#defer" class="header-anchor">#</a> defer</h3> <p><code>defer</code> 会“在后台”下载，浏览器将继续处理 HTML，构建 DOM；然后等 **DOM 构建完成后，脚本才会执行。**也因此这中标签在文档中的位置不重要</p> <h3 id="async"><a href="#async" class="header-anchor">#</a> async</h3> <p>也是异步加载不会阻塞页面渲染，但是当script加载就绪后，就会根据在文档中的顺序优先执行代码</p> <h2 id="set无法对哪些值去重"><a href="#set无法对哪些值去重" class="header-anchor">#</a> Set无法对哪些值去重</h2> <blockquote><p>Set成员是唯一且无序的，没有重复值。
向Set中加入值的时候，不会进行类型转换，类似于精确运算符<code>===</code>，主要的区别在于**<code>NaN等于自身</code>**，==而精确运算符<code>===</code>判断NaN不等于自身。==</p></blockquote> <ul><li>Symbol</li> <li>引用类型 function/object/array/..</li></ul> <h3 id="方法和属性"><a href="#方法和属性" class="header-anchor">#</a> 方法和属性</h3> <p>实例属性constructor：构造函数
size: 返回元素数量</p> <p><strong>遍历方法：</strong></p> <p>keys()：返回一个包含集合中所有键的迭代器
values()：返回一个包含集合中所有值的迭代器
entries()：返回一个包含set对象中所有元素得键值对迭代器
forEach(callback,thisArg)：用于对集合成员执行callback</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后修改时间:</span> <span class="time">11/29/2022, 5:57:18 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/es6笔记.html" class="prev">
        es6笔记
      </a></span> <span class="next"><a href="/blog/js学习笔记.html">
        js学习笔记
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.2e9d2283.js" defer></script><script src="/blog/assets/js/3.e2beba07.js" defer></script><script src="/blog/assets/js/35.e4832a45.js" defer></script><script src="/blog/assets/js/7.3fa0df8d.js" defer></script>
  </body>
</html>
