<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>gauhar&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script async="true" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1206812165499181"></script>
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="description" content="just a blog">
    
    <link rel="preload" href="/blog/assets/css/0.styles.db100c87.css" as="style"><link rel="preload" href="/blog/assets/js/app.2e9d2283.js" as="script"><link rel="preload" href="/blog/assets/js/3.e2beba07.js" as="script"><link rel="preload" href="/blog/assets/js/21.cd32d469.js" as="script"><link rel="preload" href="/blog/assets/js/7.3fa0df8d.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.ffe1b67e.js"><link rel="prefetch" href="/blog/assets/js/11.bf8611f8.js"><link rel="prefetch" href="/blog/assets/js/12.2f148a29.js"><link rel="prefetch" href="/blog/assets/js/13.eba1c3bc.js"><link rel="prefetch" href="/blog/assets/js/14.12f6a606.js"><link rel="prefetch" href="/blog/assets/js/15.f1d522ef.js"><link rel="prefetch" href="/blog/assets/js/16.43638a1e.js"><link rel="prefetch" href="/blog/assets/js/17.a80c4d40.js"><link rel="prefetch" href="/blog/assets/js/18.de192a16.js"><link rel="prefetch" href="/blog/assets/js/19.e5371cd0.js"><link rel="prefetch" href="/blog/assets/js/20.bc32fb2a.js"><link rel="prefetch" href="/blog/assets/js/22.9267661b.js"><link rel="prefetch" href="/blog/assets/js/23.89405885.js"><link rel="prefetch" href="/blog/assets/js/24.2cd9ba43.js"><link rel="prefetch" href="/blog/assets/js/25.0ccd51b3.js"><link rel="prefetch" href="/blog/assets/js/26.303cbd19.js"><link rel="prefetch" href="/blog/assets/js/27.439c84c9.js"><link rel="prefetch" href="/blog/assets/js/28.6f111a67.js"><link rel="prefetch" href="/blog/assets/js/29.dec832ae.js"><link rel="prefetch" href="/blog/assets/js/30.833c3be2.js"><link rel="prefetch" href="/blog/assets/js/31.55e3416f.js"><link rel="prefetch" href="/blog/assets/js/32.61e40509.js"><link rel="prefetch" href="/blog/assets/js/33.4ef4f282.js"><link rel="prefetch" href="/blog/assets/js/34.9277d900.js"><link rel="prefetch" href="/blog/assets/js/35.e4832a45.js"><link rel="prefetch" href="/blog/assets/js/4.9caf473a.js"><link rel="prefetch" href="/blog/assets/js/5.dd7ab500.js"><link rel="prefetch" href="/blog/assets/js/6.a12ed50c.js"><link rel="prefetch" href="/blog/assets/js/8.1c71d7cb.js"><link rel="prefetch" href="/blog/assets/js/9.4ba59c0f.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.3644c41e.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.db100c87.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">gauhar's blog</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他版本博客" class="dropdown-title"><span class="title">其他版本博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他版本博客" class="mobile-dropdown-title"><span class="title">其他版本博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gauharchan.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vitepress版
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gauhar.gitee.io/vuepress_node/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  某node资源
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gauhar.gitee.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hexo版(不维护)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://gitee.com/gauhar" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/GauharChan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他版本博客" class="dropdown-title"><span class="title">其他版本博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他版本博客" class="mobile-dropdown-title"><span class="title">其他版本博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gauharchan.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vitepress版
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gauhar.gitee.io/vuepress_node/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  某node资源
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gauhar.gitee.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hexo版(不维护)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://gitee.com/gauhar" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/GauharChan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/vite-plugin-shared.html" class="sidebar-link">vite插件-shared</a></li><li><a href="/blog/Taro开发中的坑.html" class="sidebar-link">Taro+NutUI</a></li><li><a href="/blog/react笔记.html" class="sidebar-link">react</a></li><li><a href="/blog/vue3.html" class="sidebar-link">vue3</a></li><li><a href="/blog/vue3源码.html" class="sidebar-link">vue3源码</a></li><li><a href="/blog/antv.html" class="sidebar-link">antv</a></li><li><a href="/blog/typeScript.html" class="sidebar-link">typeScript</a></li><li><a href="/blog/taro.html" class="sidebar-link">taro1.x</a></li><li><a href="/blog/uniapp.html" aria-current="page" class="active sidebar-link">uniapp</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/uniapp.html#目录结构" class="sidebar-link">目录结构</a></li><li class="sidebar-sub-header"><a href="/blog/uniapp.html#tips" class="sidebar-link">tips</a></li><li class="sidebar-sub-header"><a href="/blog/uniapp.html#生命周期" class="sidebar-link">生命周期</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/uniapp.html#应用生命周期" class="sidebar-link">应用生命周期</a></li><li class="sidebar-sub-header"><a href="/blog/uniapp.html#页面生命周期" class="sidebar-link">页面生命周期</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/uniapp.html#使用-vuex" class="sidebar-link">使用 vuex</a></li><li class="sidebar-sub-header"><a href="/blog/uniapp.html#globaldata" class="sidebar-link">globalData</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/uniapp.html#取值和赋值" class="sidebar-link">取值和赋值</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/uniapp.html#分包" class="sidebar-link">分包</a></li><li class="sidebar-sub-header"><a href="/blog/uniapp.html#自定义事件" class="sidebar-link">自定义事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/uniapp.html#uni-emit-eventname-object" class="sidebar-link">uni.$emit(eventName, object)</a></li><li class="sidebar-sub-header"><a href="/blog/uniapp.html#uni-on-eventname-callback" class="sidebar-link">uni.$on(eventName, callback)</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/uniapp.html#api" class="sidebar-link">api</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/uniapp.html#获取用户定位" class="sidebar-link">获取用户定位</a></li><li class="sidebar-sub-header"><a href="/blog/uniapp.html#录音" class="sidebar-link">录音</a></li><li class="sidebar-sub-header"><a href="/blog/uniapp.html#播放音频" class="sidebar-link">播放音频</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/uniapp.html#组件" class="sidebar-link">组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/uniapp.html#swiper" class="sidebar-link">swiper</a></li><li class="sidebar-sub-header"><a href="/blog/uniapp.html#rich-text" class="sidebar-link">rich-text</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/uniapp.html#坑" class="sidebar-link">坑</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/uniapp.html#出现报错cannot-read-property-call-of-undefined" class="sidebar-link">出现报错Cannot read property 'call' of undefined</a></li><li class="sidebar-sub-header"><a href="/blog/uniapp.html#使用-uni-ui-的同时使用自定义组件的时候" class="sidebar-link">使用 uni-ui 的同时使用自定义组件的时候</a></li><li class="sidebar-sub-header"><a href="/blog/uniapp.html#open-data" class="sidebar-link">open-data</a></li><li class="sidebar-sub-header"><a href="/blog/uniapp.html#css" class="sidebar-link">css</a></li><li class="sidebar-sub-header"><a href="/blog/uniapp.html#ref" class="sidebar-link">ref</a></li></ul></li></ul></li><li><a href="/blog/es6笔记.html" class="sidebar-link">es6笔记</a></li><li><a href="/blog/问题.html" class="sidebar-link">问题</a></li><li><a href="/blog/js学习笔记.html" class="sidebar-link">js学习笔记</a></li><li><a href="/blog/webpack.html" class="sidebar-link">webpack</a></li><li><a href="/blog/vue笔记.html" class="sidebar-link">vue笔记</a></li><li><a href="/blog/常用代码.html" class="sidebar-link">常用代码</a></li><li><a href="/blog/工作常用代码.html" class="sidebar-link">工作常用代码</a></li><li><a href="/blog/工作上遇到的坑.html" class="sidebar-link">工作上遇到的坑</a></li><li><a href="/blog/那些坑.html" class="sidebar-link">那些坑</a></li><li><a href="/blog/正则表达式.html" class="sidebar-link">正则表达式</a></li><li><a href="/blog/flutter.html" class="sidebar-link">flutter</a></li><li><a href="/blog/js笔记.html" class="sidebar-link">js笔记</a></li><li><a href="/blog/note.html" class="sidebar-link">note</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div class="adswrapper"><!----> <div style="display:none;"></div> <ins data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-1206812165499181" data-ad-slot="9205356858" data-ad-test="" data-ad-region="" class="adsbygoogle" style="display:block;"></ins> <!----> <div style="display:none;"> (adsbygoogle = window.adsbygoogle || []).push({}); </div></div> <h2 id="目录结构"><a href="#目录结构" class="header-anchor">#</a> 目录结构</h2> <ul><li><p>components：组件(插件)，easycom 自动根据这个文件夹自动引入组件，在 vue 文件的<code>template</code>直接使用，无需引入，注册。(可自行修改文件，做出自己想要的组件，都是 vue 文件)</p></li> <li><p>common：公共文件，css，less，scss，font 字体图标等文件可放在此文件夹再对应的引入使用。</p></li> <li><p>pages： 页面文件</p></li> <li><p>static：静态资源并且只能存放在此文件夹，视频，图片等</p></li> <li><p>wxcomponents：微信小程序组件(插件)</p></li> <li><p>main.js ：Vue 初始化入口文件</p></li> <li><p>App.vue：应用配置，用来配置 App 全局样式以及监听 <a href="https://uniapp.dcloud.io/frame?id=%E5%BA%94%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F" target="_blank" rel="noopener noreferrer">应用生命周期<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>manifest.json：配置应用名称、appid、logo、版本等打包信息，<a href="https://uniapp.dcloud.io/collocation/manifest" target="_blank" rel="noopener noreferrer">详见<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>pages.json ：配置页面路由、导航条、选项卡等页面类信息，<a href="https://uniapp.dcloud.io/collocation/pages" target="_blank" rel="noopener noreferrer">详见<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>使用微信小程序的组件时例如：<code>vant-weapp</code>，可以在<code>globalStyle</code>配置<code>usingComponents</code>全局引用</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;van-button&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/wxcomponents/vant-weapp/button/index&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="tips"><a href="#tips" class="header-anchor">#</a> tips</h2> <ul><li><p>css 文件不能引用网络地址，字体文件可以</p></li> <li><p>支付宝小程序组件内 image 标签不可使用相对路径</p></li> <li><p><code>@/</code>指向根目录，在 cli 项目中@指向 src 目录</p></li> <li><p>js 文件不支持使用<code>/</code>开头的方式引入</p></li> <li><p>小程序不支持在 css 中使用本地文件，包括本地的背景图和字体文件</p></li> <li><p>非 H5 端不支持<code>classObject</code> 和 <code>styleObject</code> 语法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">classObject</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">'text-danger'</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>非 H5 端<strong>组件</strong>不可以用<code>class</code>和<code>style</code>绑定</p></li> <li><p>使用字体图标，引入本地文件时，<code>~@/</code>表示根路径</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&quot;iconfont&quot;</span><span class="token punctuation">;</span>
  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&quot;~@/static/iconfont.eot?t=1587009270769&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span> <span class="token comment">/* IE9 */</span>
  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&quot;~@/static/iconfont.eot?t=1587009270769#iefix&quot;</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;embedded-opentype&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* IE6-IE8 */</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="生命周期"><a href="#生命周期" class="header-anchor">#</a> 生命周期</h2> <h3 id="应用生命周期"><a href="#应用生命周期" class="header-anchor">#</a> 应用生命周期</h3> <blockquote><p>先触发 onLaunch 再触发 onShow</p> <p><strong>应用生命周期仅可在<code>App.vue</code>中监听，在其它页面监听无效。</strong></p></blockquote> <table><thead><tr><th style="text-align:left;">函数名</th> <th style="text-align:left;">说明</th></tr></thead> <tbody><tr><td style="text-align:left;">onLaunch</td> <td style="text-align:left;">当<code>uni-app</code> 初始化完成时触发（全局只触发一次）</td></tr> <tr><td style="text-align:left;">onShow</td> <td style="text-align:left;">当 <code>uni-app</code> 启动，或从后台进入前台显示</td></tr> <tr><td style="text-align:left;">onHide</td> <td style="text-align:left;">当 <code>uni-app</code> 从前台进入后台</td></tr> <tr><td style="text-align:left;">onError</td> <td style="text-align:left;">当 <code>uni-app</code> 报错时触发</td></tr></tbody></table> <h3 id="页面生命周期"><a href="#页面生命周期" class="header-anchor">#</a> 页面生命周期</h3> <table><thead><tr><th style="text-align:left;">函数名</th> <th style="text-align:left;">说明</th> <th style="text-align:left;">平台差异说明</th></tr></thead> <tbody><tr><td style="text-align:left;">onLoad</td> <td style="text-align:left;">监听页面加载，其参数为上个页面传递的数据，参数类型为 Object（用于页面传参），参考<a href="https://uniapp.dcloud.io/api/router?id=navigateto" target="_blank" rel="noopener noreferrer">示例<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">onShow</td> <td style="text-align:left;">监听页面显示。页面每次出现在屏幕上都触发，包括从下级页面点返回露出当前页面</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">onReady</td> <td style="text-align:left;">监听页面初次渲染完成。注意如果渲染速度快，会在页面进入动画完成前触发</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">onHide</td> <td style="text-align:left;">监听页面隐藏</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">onUnload</td> <td style="text-align:left;">监听页面卸载</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">onResize</td> <td style="text-align:left;">监听窗口尺寸变化</td> <td style="text-align:left;">App、微信小程序</td></tr> <tr><td style="text-align:left;">onPullDownRefresh</td> <td style="text-align:left;">监听用户下拉动作，一般用于下拉刷新，参考<a href="https://uniapp.dcloud.io/api/ui/pulldown" target="_blank" rel="noopener noreferrer">示例<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">onReachBottom</td> <td style="text-align:left;">页面上拉触底事件的处理函数</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">onTabItemTap</td> <td style="text-align:left;">点击 tab 时触发，参数为 Object，具体见下方注意事项</td> <td style="text-align:left;">微信小程序、百度小程序、H5、App（自定义组件模式）</td></tr> <tr><td style="text-align:left;">onShareAppMessage</td> <td style="text-align:left;">用户点击右上角分享</td> <td style="text-align:left;">微信小程序、百度小程序、字节跳动小程序、支付宝小程序</td></tr> <tr><td style="text-align:left;">onPageScroll</td> <td style="text-align:left;">监听页面滚动，参数为 Object</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">onNavigationBarButtonTap</td> <td style="text-align:left;">监听原生标题栏按钮点击事件，参数为 Object</td> <td style="text-align:left;">5+ App、H5</td></tr> <tr><td style="text-align:left;">onBackPress</td> <td style="text-align:left;">监听页面返回，返回 event = {from:backbutton、 navigateBack} ，backbutton 表示来源是左上角返回按钮或 android 返回键；navigateBack 表示来源是 uni.navigateBack ；详细说明及使用：<a href="http://ask.dcloud.net.cn/article/35120" target="_blank" rel="noopener noreferrer">onBackPress 详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td style="text-align:left;">App、H5</td></tr> <tr><td style="text-align:left;">onNavigationBarSearchInputChanged</td> <td style="text-align:left;">监听原生标题栏搜索输入框输入内容变化事件</td> <td style="text-align:left;">App、H5</td></tr> <tr><td style="text-align:left;">onNavigationBarSearchInputConfirmed</td> <td style="text-align:left;">监听原生标题栏搜索输入框搜索事件，用户点击软键盘上的“搜索”按钮时触发。</td> <td style="text-align:left;">App、H5</td></tr> <tr><td style="text-align:left;">onNavigationBarSearchInputClicked</td> <td style="text-align:left;">监听原生标题栏搜索输入框点击事件</td> <td style="text-align:left;">App、H5</td></tr></tbody></table> <h2 id="使用-vuex"><a href="#使用-vuex" class="header-anchor">#</a> 使用 vuex</h2> <blockquote><p><strong>这里可以使用<code>uni</code>对象</strong>，像提示登录，可以写在<code>store</code>，然后页面随意调用</p></blockquote> <p>根目录下新建<code>store</code>文件夹，新建一个 js 文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;gauhar&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">setName</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>name <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">callName</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&quot;setName&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 提示登录的弹窗</span>
    <span class="token function">login</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>uni<span class="token punctuation">.</span>showModal<span class="token punctuation">)</span><span class="token punctuation">;</span>
      uni<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;提示&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">content</span><span class="token operator">:</span> msg<span class="token punctuation">,</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>confirm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            uni<span class="token punctuation">.</span><span class="token function">switchTab</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;/pages/my/my&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>cancel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            uni<span class="token punctuation">.</span><span class="token function">navigateBack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token literal-property property">delta</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在<code>main.js</code>中引入 store，并挂载到实例上，方便使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">&quot;./store/index&quot;</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

App<span class="token punctuation">.</span>mpType <span class="token operator">=</span> <span class="token string">&quot;app&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  store<span class="token punctuation">,</span>
  <span class="token operator">...</span>App<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>通过<code>this.$store</code>调用</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">&quot;https://uniapp.dcloud.io/component/README?id=uniui&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">msg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>popup<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handleTimeUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&quot;callName&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;时间到&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>popup<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="globaldata"><a href="#globaldata" class="header-anchor">#</a> globalData</h2> <blockquote><p>全局变量，如果不用 vuex 的话，这个还是挺不错的</p></blockquote> <p>在 App.vue 中定义</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">globalData</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">onLaunch</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;App Launch&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">onShow</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;App Show&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">onHide</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;App Hide&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token comment">/*每个页面公共css */</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="取值和赋值"><a href="#取值和赋值" class="header-anchor">#</a> 取值和赋值</h3> <p>赋值：<code>getApp().globalData.text = 'test'</code></p> <p>取值：<code>console.log(getApp().globalData.text) // 'test'</code></p> <h2 id="分包"><a href="#分包" class="header-anchor">#</a> 分包</h2> <p>在 page.json 添加规则</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;subPackages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token property">&quot;root&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pagesA&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 分包根目录</span>
  <span class="token property">&quot;pages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>  <span class="token comment">// 配置页面，path,style</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;list/list&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token property">&quot;preloadRule&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>   <span class="token comment">// 分包下载规则</span>
  <span class="token property">&quot;pagesA/list/list&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 包路径</span>
    <span class="token property">&quot;network&quot;</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// wifi 还是全部</span>
    <span class="token property">&quot;packages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;__APP__&quot;</span><span class="token punctuation">]</span>  <span class="token comment">// 表示主包</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;pages/index/index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;network&quot;</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;packages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;pagesA&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="自定义事件"><a href="#自定义事件" class="header-anchor">#</a> 自定义事件</h2> <h3 id="uni-emit-eventname-object"><a href="#uni-emit-eventname-object" class="header-anchor">#</a> uni.$emit(eventName, object)</h3> <blockquote><p>触发</p> <p>注意第二个参数是对象</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>uni<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;update&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">&quot;页面更新&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="uni-on-eventname-callback"><a href="#uni-on-eventname-callback" class="header-anchor">#</a> uni.$on(eventName, callback)</h3> <blockquote><p>监听</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>uni<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">&quot;update&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;监听到事件来自 update ，携带参数 msg 为：&quot;</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="api"><a href="#api" class="header-anchor">#</a> api</h2> <h3 id="获取用户定位"><a href="#获取用户定位" class="header-anchor">#</a> 获取用户定位</h3> <ol><li><p>在<code>manifest.json</code>中设置，desc 是获取权限时的提示语</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;permission&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;scope.userLocation&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;desc&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;你的位置信息将用于小程序位置接口的效果展示&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><code>uni.authorize</code>获取权限，success 接收成功回调</p></li> <li><p><code>uni.getLocation</code>获取用户定位<code>type: &quot;gcj02&quot;</code>获取的经纬度可以用在<code>map</code>组件中</p></li> <li><p><code>uni.openLocation</code>使用应用内置地图查看位置。传入获取到的经纬度</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
uni<span class="token punctuation">.</span><span class="token function">authorize</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">scope</span><span class="token operator">:</span> <span class="token string">&quot;scope.userLocation&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 对应permission的键名</span>
  <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    uni<span class="token punctuation">.</span><span class="token function">getLocation</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;gcj02&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// altitude: true,</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        that<span class="token punctuation">.</span>longitude <span class="token operator">=</span> res<span class="token punctuation">.</span>longitude<span class="token punctuation">;</span>
        that<span class="token punctuation">.</span>latitude <span class="token operator">=</span> res<span class="token punctuation">.</span>latitude<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;当前位置的经度：&quot;</span> <span class="token operator">+</span> res<span class="token punctuation">.</span>longitude<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;当前位置的纬度：&quot;</span> <span class="token operator">+</span> res<span class="token punctuation">.</span>latitude<span class="token punctuation">)</span><span class="token punctuation">;</span>
        uni<span class="token punctuation">.</span><span class="token function">openLocation</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">latitude</span><span class="token operator">:</span> that<span class="token punctuation">.</span>latitude<span class="token punctuation">,</span>
          <span class="token literal-property property">longitude</span><span class="token operator">:</span> that<span class="token punctuation">.</span>longitude<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h3 id="录音"><a href="#录音" class="header-anchor">#</a> 录音</h3> <h4 id="流程"><a href="#流程" class="header-anchor">#</a> 流程</h4> <ol><li><p>创建录音对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> recorderManager <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">getRecorderManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>页面加载完成，绑定<strong>监听</strong>录音结束事件，保存返回的临时文件路径</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  recorderManager<span class="token punctuation">.</span><span class="token function">onStop</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    that<span class="token punctuation">.</span>voicePath <span class="token operator">=</span> res<span class="token punctuation">.</span>tempFilePath<span class="token punctuation">;</span>  <span class="token comment">// 保存返回的临时文件路径</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div></li> <li><p>开始录音事件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">startRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;开始录音&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  recorderManager<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">'aac'</span>  <span class="token comment">// 指定为aac格式，更加高效</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><strong>触发</strong>结束录音事件</p> <div class="language-js extra-class"><pre class="language-js"><code>recorderManager<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h3 id="播放音频"><a href="#播放音频" class="header-anchor">#</a> 播放音频</h3> <blockquote><p>音频的路径可以是微信临时文件路径，可以使网络地址</p></blockquote> <ol><li><p>创建播放<strong>音频</strong>对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> innerAudioContext <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">createInnerAudioContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>路径的赋值，一些设置</p> <div class="language-js extra-class"><pre class="language-js"><code>innerAudioContext<span class="token punctuation">.</span>src <span class="token operator">=</span>
  <span class="token string">&quot;http://gauhar.top/music/static/media/%E6%9E%97%E4%BF%8A%E6%9D%B0-%E9%9B%AA%E8%90%BD%E4%B8%8B%E7%9A%84%E5%A3%B0%E9%9F%B3.ff6502e.mp3&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 设置路径</span>
innerAudioContext<span class="token punctuation">.</span>volume <span class="token operator">=</span> <span class="token number">0.7</span><span class="token punctuation">;</span> <span class="token comment">// 设置音量</span>
</code></pre></div></li> <li><p>调用播放方法</p> <div class="language-js extra-class"><pre class="language-js"><code>innerAudioContext<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h2 id="组件"><a href="#组件" class="header-anchor">#</a> 组件</h2> <h3 id="swiper"><a href="#swiper" class="header-anchor">#</a> swiper</h3> <blockquote><p>轮播图组件</p></blockquote> <p>修改指示点</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.swiper /deep/ .wx-swiper-dot</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token selector">.swiper /deep/ .wx-swiper-dot-active</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span> <span class="token comment">/* 修改当前的指示点 */</span>

<span class="token comment">/* #ifdef MP-WEIXIN */</span>
<span class="token selector">.swiper /deep/ .wx-swiper-dot-active</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 30rpx<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 10rpx<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 5rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* #endif */</span>

<span class="token comment">/* #ifndef APP-VUE */</span>
<span class="token selector">/deep/uni-swiper .uni-swiper-dot-active</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 30rpx<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 10rpx<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 5rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* #endif */</span>
</code></pre></div><h3 id="rich-text"><a href="#rich-text" class="header-anchor">#</a> rich-text</h3> <blockquote><p>富文本渲染组件</p> <p>:node=&quot;node 数组或者字符串&quot;。 app 端不支持字符串，并且字符串被使用的时候会被转换为数组，性能低</p></blockquote> <p>使用<a href="https://github.com/dcloudio/hello-uniapp/blob/master/common/html-parser.js" target="_blank" rel="noopener noreferrer">htmlParser.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>将字符串转换为数组再使用。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rich-text</span> <span class="token attr-name">:nodes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nodeArr<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rich-text</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> parseHtml <span class="token keyword">from</span> <span class="token string">'../../common/htmlParser'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">htmlString</span><span class="token operator">:</span> <span class="token string">'&lt;div style=&quot;text-align:center;&quot;&gt;&lt;img src=&quot;https://img-cdn-qiniu.dcloud.net.cn/uniapp/images/uni@2x.png&quot;/&gt;&lt;/div&gt;'</span><span class="token punctuation">,</span>
      parseHtml
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">nodeArr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">parseHtml</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>htmlString<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
// 这是转换之后的数组
nodes=&quot;[{&quot;name&quot;:&quot;div&quot;,&quot;attrs&quot;:{&quot;style&quot;:&quot;text-align:center;&quot;},&quot;children&quot;:[{&quot;name&quot;:&quot;img&quot;,&quot;attrs&quot;:{&quot;src&quot;:&quot;https://img-cdn-qiniu.dcloud.net.cn/uniapp/images/uni@2x.png&quot;}}]}]&quot;
</code></pre></div><h2 id="坑"><a href="#坑" class="header-anchor">#</a> 坑</h2> <h3 id="出现报错cannot-read-property-call-of-undefined"><a href="#出现报错cannot-read-property-call-of-undefined" class="header-anchor">#</a> 出现报错<code>Cannot read property 'call' of undefined</code></h3> <p>通常出现在移动文件夹，修改 pages.json 的某些配置出现，一度怀疑自己代码写错，对，就要这样坑你！</p> <blockquote><p>解决方法：停止运行项目，把打开了这个项目文件夹的编辑器，微信开发者工具关闭。打开项目文件夹，删除 unpackage dist 目录，再重新启动服务。重新回到了美好的世界</p></blockquote> <h3 id="使用-uni-ui-的同时使用自定义组件的时候"><a href="#使用-uni-ui-的同时使用自定义组件的时候" class="header-anchor">#</a> 使用 uni-ui 的同时使用自定义组件的时候</h3> <p>配置 easycom 的时候注意，从官网复制的例子，中间少了一层文件夹的名字</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;easycom&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;autoscan&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token property">&quot;custom&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;uni-(.*)&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@/components/uni-$1/uni-$1.vue&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;gh-(.*)&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@/components/gh-$1/gh-$1.vue&quot;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><h3 id="open-data"><a href="#open-data" class="header-anchor">#</a> open-data</h3> <blockquote><p>展示用户头像，很多情况下要求圆形</p></blockquote> <p>需要设置样式<code>display: block;</code> + <code>overflow: hidden;</code></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.avatar</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100rpx<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100rpx<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="css"><a href="#css" class="header-anchor">#</a> css</h3> <h4 id="border-radius"><a href="#border-radius" class="header-anchor">#</a> border-radius</h4> <blockquote><p>在小程序如果要设置其中的某个圆角，而不是四个角。比如只要 top 部分的左右两个圆角，底下的还是直角</p></blockquote> <p><strong>不能像 h5 那样直接写</strong></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">div</span> <span class="token punctuation">{</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 20px 20px 0 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>必须单独设置</strong></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">div</span> <span class="token punctuation">{</span>
  <span class="token property">border-top-left-radius</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
  <span class="token property">border-top-right-radius</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ref"><a href="#ref" class="header-anchor">#</a> ref</h3> <p>内置的组件中不可以使用<code>this.$refs</code>获取，只能用于自定义组件</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后修改时间:</span> <span class="time">2/3/2023, 7:07:38 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/taro.html" class="prev">
        taro1.x
      </a></span> <span class="next"><a href="/blog/es6笔记.html">
        es6笔记
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.2e9d2283.js" defer></script><script src="/blog/assets/js/3.e2beba07.js" defer></script><script src="/blog/assets/js/21.cd32d469.js" defer></script><script src="/blog/assets/js/7.3fa0df8d.js" defer></script>
  </body>
</html>
